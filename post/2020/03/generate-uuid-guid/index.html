<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title> Golang 中生成唯一的字符串（UUID，GUID）(译文) &#183; 随笔 </title>
<link rel=stylesheet href=https://xiayuguo.github.io/css/slim.css>
<link rel=stylesheet href=https://xiayuguo.github.io/css/highlight.min.css>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel=stylesheet type=text/css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.ico>
<link href rel=alternate type=application/rss+xml title=随笔>
</head>
<body>
<div class=container>
<div class=header>
<h1 class=site-title><a href=https://xiayuguo.github.io/>随笔</a></h1>
<p class=site-tagline>Stay hungry. Stay foolish.</p>
<div class=nav>
<a class=nav-btn href=#>
<span class="ci ci-burger"></span>
</a>
<ul class=nav-list>
<li class=spacer>&ac;</li>
<li><a href=https://github.com/xiayuguo>Github</a></li>
</ul>
</div>
</div>
<div class=content>
<div class=posts>
<div class=post>
<h2 class=post-title><a href=https://xiayuguo.github.io/post/2020/03/generate-uuid-guid/>Golang 中生成唯一的字符串（UUID，GUID）(译文)</a></h2>
<span class=post-date>Mar 15, 2020 </span>
<div class=post-content>
<blockquote>
<p>作者：Stefan Nilsson</p>
<p>原文网址：https://yourbasic.org/golang/generate-uuid-guid/</p>
</blockquote>
<p><img src=http://oss.xiayuguo.com/blog/202003/fingerprint-keyboard.jpg alt></p>
<p>通用唯一标识符 UUID（universally unique identifier）或全局唯一标识符 GUID （globally unique identifier）是用于标识信息的 128 位数字。</p>
<ul>
<li>UUID 是唯一的(出于实用目的)：它重复的概率非常接近零。</li>
<li>UUID 不依赖中央机构的注册和分配。</li>
</ul>
<p>UUID 的字符串表示形式由 32 个十六进制数字组成，以 5 个组显示，由连字符 <code>-</code> 分隔。例如：</p>
<pre tabindex=0><code>123e4567-e89b-12d3-a456-426655440000
</code></pre><h2 id=uuid-生成器示例>UUID 生成器示例</h2>
<p>您可以使用来自 <a href=https://golang.org/pkg/crypto/rand/ title=crypto/rand>crypto/rand</a> 包的 <a href=https://golang.org/pkg/crypto/rand/#Read title=rand.Read>rand.Read</a> 函数来生成基本的 UUID。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>byte</span>, <span style=color:#ae81ff>16</span>)
<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>rand</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>b</span>)
<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
    <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>err</span>)
}
<span style=color:#a6e22e>uuid</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%x-%x-%x-%x-%x&#34;</span>,
    <span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>4</span>], <span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>4</span>:<span style=color:#ae81ff>6</span>], <span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>6</span>:<span style=color:#ae81ff>8</span>], <span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>8</span>:<span style=color:#ae81ff>10</span>], <span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>10</span>:])
<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>uuid</span>)
</code></pre></div><p>输出：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#ae81ff>9438167</span><span style=color:#a6e22e>c</span><span style=color:#f92672>-</span><span style=color:#ae81ff>9493</span><span style=color:#f92672>-</span><span style=color:#ae81ff>4993</span><span style=color:#f92672>-</span><span style=color:#a6e22e>fd48</span><span style=color:#f92672>-</span><span style=color:#ae81ff>950</span><span style=color:#a6e22e>b27aad7c9</span>
</code></pre></div><h4 id=局限性>局限性</h4>
<p>此 UUID 不符合 <a href=https://tools.ietf.org/html/rfc4122 title=RFC4122>RFC4122</a>。特别是，它不包含任何版本号或变体号。</p>
<blockquote>
<p>警告：如果系统底层调用失败，则 <code>rand.Read</code> 调用将返回错误。例如，如果它在 <code>Unix</code> 系统上不能读取 <code>/dev/urandom</code>，或者在 <code>Windows</code> 系统上 <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa379886(v=vs.85).aspx" title=CryptAcquireContext>CryptAcquireContext</a> 调用失败。</p>
</blockquote>
<h2 id=延伸阅读>延伸阅读</h2>
<p><img src=http://oss.xiayuguo.com/blog/202003/dart.jpg alt>
<a href=https://xiayuguo.com/post/2020/03/generate-number-random-range title="Golang 中生成随机数，字符和切片元素（译文）">Golang 中生成随机数，字符和切片元素（译文）</a></p>
</div>
</div>
<div class=pagination>
<a class="btn previous" href=https://xiayuguo.github.io/post/2020/03/rent-refund/> Prev</a>
<a class="btn next" href=https://xiayuguo.github.io/post/2020/03/crypto-rand-int/> Next</a>
</div>
</div>
</div>
<div id=disqus_thread></div>
<script>var disqus_config=function(){this.page.url="https://xiayuguo.github.io/post/2020/03/generate-uuid-guid/"};(function(){var a=document,b=a.createElement('script');b.src='//yuguo.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript>
<div class=footer>
<p>Copyright@<a href=https://xiayuguo.github.io/about>Yuguo</a> 2019. Powered by <a href=https://gohugo.io/>Hugo</a>. This theme—Slim—is open sourced on <a href=https://github.com/zhe/hugo-theme-slim>Github</a>.</p>
</div>
</div>
<script src=https://xiayuguo.github.io/js/slim.js></script>
<script src=https://xiayuguo.github.io/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-161689466-1','auto'),ga('send','pageview')</script>
</body>
</html>