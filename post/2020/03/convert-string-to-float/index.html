<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title> Golang 中字符串和浮点数互转（译文） &#183; 随笔 </title>
<link rel=stylesheet href=https://xiayuguo.github.io/css/slim.css>
<link rel=stylesheet href=https://xiayuguo.github.io/css/highlight.min.css>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel=stylesheet type=text/css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.ico>
<link href rel=alternate type=application/rss+xml title=随笔>
</head>
<body>
<div class=container>
<div class=header>
<h1 class=site-title><a href=https://xiayuguo.github.io/>随笔</a></h1>
<p class=site-tagline>Stay hungry. Stay foolish.</p>
<div class=nav>
<a class=nav-btn href=#>
<span class="ci ci-burger"></span>
</a>
<ul class=nav-list>
<li class=spacer>&ac;</li>
<li><a href=https://github.com/xiayuguo>Github</a></li>
</ul>
</div>
</div>
<div class=content>
<div class=posts>
<div class=post>
<h2 class=post-title><a href=https://xiayuguo.github.io/post/2020/03/convert-string-to-float/>Golang 中字符串和浮点数互转（译文）</a></h2>
<span class=post-date>Mar 11, 2020 </span>
<div class=post-content>
<blockquote>
<p>作者：Stefan Nilsson</p>
<p>原文网址：https://yourbasic.org/golang/convert-string-to-float/</p>
</blockquote>
<h2 id=字符串转为浮点数>字符串转为浮点数</h2>
<p>使用 <a href=https://golang.org/pkg/strconv/#ParseFloat title=strconv.ParseFloat>strconv.ParseFloat</a> 函数将字符串解析为浮点数, 通过指定参数 bitSize 的值来确定精度：float32 为 32，float64 为 64。</p>
<pre tabindex=0><code>func ParseFloat(s string, bitSize int) (float64, error)
</code></pre><p>当 bitSize 为 32 时，结果仍为 float64 类型，但可以将其转换为 float32 而无需更改其值。</p>
<pre tabindex=0><code>f := &quot;3.14159265&quot;
if s, err := strconv.ParseFloat(f, 32); err == nil {
    fmt.Println(s) // 3.1415927410125732
}
if s, err := strconv.ParseFloat(f, 64); err == nil {
    fmt.Println(s) // 3.14159265
}
</code></pre><h2 id=浮点数转为字符串>浮点数转为字符串</h2>
<p>使用 <a href=https://golang.org/pkg/fmt/#Sprintf title=fmt.Sprintf>fmt.Sprintf</a> 方法将浮点数格式化为字符串。</p>
<pre tabindex=0><code>s := fmt.Sprintf(&quot;%f&quot;, 123.456) // s == &quot;123.456000&quot;
</code></pre><table>
<thead>
<tr>
<th style=text-align:left>格式化输出</th>
<th style=text-align:left>说明</th>
<th style=text-align:left>占位符</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:left>1.234560e+02</td>
<td style=text-align:left>科学计数法</td>
<td style=text-align:left>%e</td>
</tr>
<tr>
<td style=text-align:left>123.456000</td>
<td style=text-align:left>有小数点而无指数</td>
<td style=text-align:left>%f</td>
</tr>
<tr>
<td style=text-align:left>123.46</td>
<td style=text-align:left>默认宽度，精度 2</td>
<td style=text-align:left>%.2f</td>
</tr>
<tr>
<td style=text-align:left>␣␣123.46</td>
<td style=text-align:left>宽度 8, 精度 2</td>
<td style=text-align:left>%8.2f</td>
</tr>
<tr>
<td style=text-align:left>123.456</td>
<td style=text-align:left>(根据情况选择 %e 或 %f 以产生更紧凑的（无末尾的0）输出)</td>
<td style=text-align:left>%g</td>
</tr>
</tbody>
</table>
<h2 id=fmt-备忘单>Fmt 备忘单</h2>
<p><img src=http://oss.xiayuguo.com/blog/202003/format-thumb.jpg alt></p>
<p><a href=https://yourbasic.org/golang/fmt-printf-reference-cheat-sheet/ title="How to format with fmt">How to format with fmt</a></p>
</div>
</div>
<div class=pagination>
<a class="btn previous" href=https://xiayuguo.github.io/post/2020/03/convert-string-to-byte-slice/> Prev</a>
<a class="btn next" href=https://xiayuguo.github.io/post/2020/03/convert-int-to-string/> Next</a>
</div>
</div>
</div>
<div id=disqus_thread></div>
<script>var disqus_config=function(){this.page.url="https://xiayuguo.github.io/post/2020/03/convert-string-to-float/"};(function(){var a=document,b=a.createElement('script');b.src='//yuguo.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments powered by Disqus.</a></noscript>
<div class=footer>
<p>Copyright@<a href=https://xiayuguo.github.io/about>Yuguo</a> 2019. Powered by <a href=https://gohugo.io/>Hugo</a>. This theme—Slim—is open sourced on <a href=https://github.com/zhe/hugo-theme-slim>Github</a>.</p>
</div>
</div>
<script src=https://xiayuguo.github.io/js/slim.js></script>
<script src=https://xiayuguo.github.io/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-161689466-1','auto'),ga('send','pageview')</script>
</body>
</html>