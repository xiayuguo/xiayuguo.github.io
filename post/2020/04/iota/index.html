<!doctype html><html>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title> Golang 中关于 iota 的 4 个例子 &#183; 随笔 </title>
<link rel=stylesheet href=https://yuguo.im/css/slim.css>
<link rel=stylesheet href=https://yuguo.im/css/highlight.min.css>
<link rel=stylesheet href=https://yuguo.im/css/sspfont.css>
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Source+Code+Pro" rel=stylesheet type=text/css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=/favicon.ico>
<link href rel=alternate type=application/rss+xml title=随笔>
</head>
<body>
<div class=container>
<div class=header>
<h1 class=site-title><a href=https://yuguo.im/>随笔</a></h1>
<p class=site-tagline>Stay hungry. Stay foolish.</p>
<div class=nav>
<a class=nav-btn href=#>
<span class="ci ci-burger"></span>
</a>
<ul class=nav-list>
<li class=spacer>&ac;</li>
<li><a href=https://github.com/xiayuguo>Github</a></li>
<li><a href=https://twitter.com/yuguo_im>Twitter</a></li>
<li><a href=/index.xml>RSS</a>
</ul>
</div>
</div>
<div class=content>
<div class=posts>
<div class=post>
<h2 class=post-title><a href=https://yuguo.im/post/2020/04/iota/>Golang 中关于 iota 的 4 个例子</a></h2>
<span class=post-date>Apr 16, 2020 </span>
<div class=post-content>
<blockquote>
<p>作者：Stefan Nilsson</p>
<p>原文网址：https://yourbasic.org/golang/iota/</p>
</blockquote>
<p><img src=http://oss.yuguo.im/blog/202004/lane-numbers.jpg alt></p>
<h2 id=iota-基本示例>iota 基本示例</h2>
<ul>
<li><code>iota</code> 关键字表示连续的整数常量0、1、2，&mldr;</li>
<li>每当源代码中出现 <code>const</code> 关键字时，它将重置为 0，</li>
<li>并在每个 <code>const</code> 后按规范递增。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>const</span> (
    <span style=color:#a6e22e>C0</span> = <span style=color:#66d9ef>iota</span>
    <span style=color:#a6e22e>C1</span> = <span style=color:#66d9ef>iota</span>
    <span style=color:#a6e22e>C2</span> = <span style=color:#66d9ef>iota</span>
)
<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>C0</span>, <span style=color:#a6e22e>C1</span>, <span style=color:#a6e22e>C2</span>) <span style=color:#75715e>// &#34;0 1 2&#34;
</span></code></pre></div><p>这可以简写为</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>const</span> (
	<span style=color:#a6e22e>C0</span> = <span style=color:#66d9ef>iota</span>
	<span style=color:#a6e22e>C1</span>
	<span style=color:#a6e22e>C2</span>
)
</code></pre></div><p>这里我们依靠这样的事实，即表达式是在经过简化的 <code>const</code> 声明中隐式重复的 —— 这表示前面的表达式及其类型的重复。</p>
<h3 id=从-1-开始>从 1 开始</h3>
<p>要以 1 而不是 0 开头的常量列表，可以在算术表达式中使用 <code>iota</code>。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>const</span> (
    <span style=color:#a6e22e>C1</span> = <span style=color:#66d9ef>iota</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
    <span style=color:#a6e22e>C2</span>
    <span style=color:#a6e22e>C3</span>
)
<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>C1</span>, <span style=color:#a6e22e>C2</span>, <span style=color:#a6e22e>C3</span>) <span style=color:#75715e>// &#34;1 2 3&#34;
</span></code></pre></div><h3 id=跳过某个值>跳过某个值</h3>
<p>您可以使用标识符 <code>_</code> 跳过常量列表中的值。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>const</span> (
    <span style=color:#a6e22e>C1</span> = <span style=color:#66d9ef>iota</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
    <span style=color:#a6e22e>_</span>
    <span style=color:#a6e22e>C3</span>
    <span style=color:#a6e22e>C4</span>
)
<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>C1</span>, <span style=color:#a6e22e>C3</span>, <span style=color:#a6e22e>C4</span>) <span style=color:#75715e>// &#34;1 3 4&#34;
</span></code></pre></div><h2 id=带有字符串的完整枚举类型最佳实践>带有字符串的完整枚举类型[最佳实践]</h2>
<p>这是一种实现枚举类型的惯用方式：</p>
<ul>
<li>创建一个新的整数类型，</li>
<li>使用 <code>iota</code> 列出其值，</li>
<li>给类型一个 <code>String</code> 函数。</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Direction</span> <span style=color:#66d9ef>int</span>

<span style=color:#66d9ef>const</span> (
    <span style=color:#a6e22e>North</span> <span style=color:#a6e22e>Direction</span> = <span style=color:#66d9ef>iota</span>
    <span style=color:#a6e22e>East</span>
    <span style=color:#a6e22e>South</span>
    <span style=color:#a6e22e>West</span>
)

<span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Direction</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span> {
    <span style=color:#66d9ef>return</span> [<span style=color:#f92672>...</span>]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;North&#34;</span>, <span style=color:#e6db74>&#34;East&#34;</span>, <span style=color:#e6db74>&#34;South&#34;</span>, <span style=color:#e6db74>&#34;West&#34;</span>}[<span style=color:#a6e22e>d</span>]
}
</code></pre></div><p>使用：</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>d</span> <span style=color:#a6e22e>Direction</span> = <span style=color:#a6e22e>North</span>
<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#a6e22e>d</span>)
<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>d</span> {
<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>North</span>:
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34; goes up.&#34;</span>)
<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>South</span>:
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34; goes down.&#34;</span>)
<span style=color:#66d9ef>default</span>:
    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34; stays put.&#34;</span>)
}
<span style=color:#75715e>// Output: North goes up.
</span></code></pre></div><h3 id=命名约定>命名约定</h3>
<p>标准命名约定是对常量也使用混合大写。例如，导出的常量为 <code>NorthWest</code>，而不是 <code>NORTH_WEST</code>。</p>
<h2 id=延伸阅读>延伸阅读</h2>
<h3 id=iota-与-><code>iota</code> 与 <code>&lt;&lt;</code></h3>
<p><code>iota</code> 的另一个常见应用如下</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=color:#66d9ef>const</span> (
	<span style=color:#a6e22e>B</span> = <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> (<span style=color:#ae81ff>10</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>iota</span>) <span style=color:#75715e>// 1                    (1 &lt;&lt; 10 * 0)
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>KB</span>                   <span style=color:#75715e>// 1024                 (1 &lt;&lt; 10 * 1)
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>MB</span>                   <span style=color:#75715e>// 1048576              (1 &lt;&lt; 10 * 2)
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>GB</span>                   <span style=color:#75715e>// 1073741824           (1 &lt;&lt; 10 * 3)
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>TB</span>                   <span style=color:#75715e>// 1099511627776        (1 &lt;&lt; 40 * 4)
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>PB</span>                   <span style=color:#75715e>// 1125899906842624     (1 &lt;&lt; 50 * 5)
</span><span style=color:#75715e></span>)
</code></pre></div>
<div>
<p>扫描下方二维码，关注<code style=color:#1aad19;font-weight:700>Feed</code>， 定期推送最新随笔</p>
<img src=http://oss.xiayuguo.com/wechat_qrcode.jpg style=width:215px;height:215px alt="公众号 Feed 二维码">
</div>
</div>
</div>
<div class=pagination>
<a class="btn previous" href=https://yuguo.im/post/2020/04/golang-excel/> Prev</a>
</div>
</div>
</div>
<div id=disqus_thread></div>
<script>var disqus_config=function(){this.page.url="https://yuguo.im/post/2020/04/iota/"};(function(){var a=document,b=a.createElement('script');b.src='//.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript rel=nofollow>comments
powered by Disqus.</a></noscript>
<div class=footer>
<p>Copyright@<a href=https://yuguo.im/about>Yuguo</a> 2022. Powered by <a href=https://gohugo.io/>Hugo</a>. This theme—Slim—is open sourced on <a href=https://github.com/zhe/hugo-theme-slim>Github</a>.</p>
</div>
</div>
<script src=https://yuguo.im/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script>
<script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-161689466-1','auto'),ga('send','pageview')</script>
</body>
</html>